"""
Botning ko'p tilliligini ta'minlash uchun lokalizatsiya
"""

TEXTS = {
    "uz": {
        # Asosiy menyular
        "main_menu": "üè† Asosiy menyu",
        "book_court": "üóì Bron qilish",
        "my_bookings": "üé´ Buyurtmalarim",
        "my_profile": "üë§ Mening profilim",
        "rules": "‚ÑπÔ∏è Qoidalar",
        "help": "‚ùì Yordam",
        "language": "üåê Til",
        
        # Start va ro'yxatdan o'tish
        "welcome": "üéæ Tennis kort bron qilish botiga xush kelibsiz!\n\nBotdan foydalanish uchun telefon raqamingizni ulashing:",
        "share_contact": "üì± Telefon raqamni ulashish",
        "enter_name": "Iltimos, ismingizni kiriting:",
        "enter_surname": "Iltimos, familiyangizni kiriting:",
        "registration_complete": "‚úÖ Ro'yxatdan o'tish muvaffaqiyatli yakunlandi!\n\nEndi tennis kortlarini bron qilishingiz mumkin.",
        
        # Bron qilish
        "select_month": "üìÖ Bron qilish uchun oyni tanlang:",
        "select_date": "üìÖ Sanani tanlang:",
        "select_court": "üèü Kortni tanlang:",
        "select_time": "‚è∞ Vaqtni tanlang:",
        "no_available_slots": "‚ùå Tanlangan sanada bo'sh vaqt yo'q",
        "booking_details": """
üéæ Bron ma'lumotlari:

üìÖ Sana: {date}
‚è∞ Vaqt: {start_time} - {end_time}
üèü Kort: {court_name}
‚è± Davomiyligi: {duration} soat

üí∞ Narx tafsiloti:
‚Ä¢ Bazaviy narx: {base_price:,.0f} so'm
‚Ä¢ Peak vaqt qo'shimchasi: {peak_extra:,.0f} so'm
‚Ä¢ Dam olish kuni qo'shimchasi: {weekend_extra:,.0f} so'm
‚Ä¢ VIP chegirma: -{discount:,.0f} so'm
‚Ä¢ Xizmat haqi: {service_fee:,.0f} so'm

üí≥ Jami to'lov: {total_amount:,.0f} so'm
        """,
        "confirm_booking": "‚úÖ Bronni tasdiqlash",
        "cancel_booking": "‚ùå Bekor qilish",
        
        # To'lov
        "select_payment_method": "üí≥ To'lov usulini tanlang:",
        "payment_payme": "üí≥ Payme",
        "payment_click": "üí≥ Click",
        "payment_uzum": "üí≥ Uzum Pay",
        "payment_processing": "‚è≥ To'lov amalga oshirilmoqda...\n\nIltimos, kuting.",
        "payment_success": "‚úÖ To'lov muvaffaqiyatli amalga oshirildi!\n\nBiletingiz tayyorlanmoqda...",
        "payment_failed": "‚ùå To'lov amalga oshmadi.\n\nIltimos, qaytadan urinib ko'ring yoki boshqa to'lov usulini tanlang.",
        "payment_cancelled": "‚ùå To'lov bekor qilindi.",
        "payment_manual_mode": "üß™ VAQTINCHA REJIM: To'lov avtomatik tasdiqlandi!",
        
        # Biletlar
        "ticket_generated": """
üé´ Sizning biletingiz tayyor!

üéæ Bilet ma'lumotlari:
‚Ä¢ Bilet ID: {ticket_id}
‚Ä¢ Sana: {date}
‚Ä¢ Vaqt: {start_time} - {end_time}
‚Ä¢ Kort: {court_name}
‚Ä¢ Narx: {amount:,.0f} so'm

üì± QR kodni saqlab qoying va kort kiraverishida ko'rsating.
        """,
        
        # Buyurtmalar
        "my_bookings_menu": "üé´ Buyurtmalarim",
        "active_bookings": "üîÑ Faol bronlar",
        "booking_history": "üìú Tarix",
        "no_active_bookings": "üö´ Sizda faol bronlar yo'q",
        "no_booking_history": "üö´ Sizda bron tarixi yo'q",
        "booking_info": """
üé´ Bron #{booking_id}

üìÖ Sana: {date}
‚è∞ Vaqt: {start_time} - {end_time}
üèü Kort: {court_name}
üí∞ Narx: {amount:,.0f} so'm
üìä Holati: {status}

{additional_info}
        """,
        "show_ticket": "üé´ Biletni ko'rsatish",
        "cancel_booking_btn": "‚ùå Bronni bekor qilish",
        
        # Profil
        "profile_info": """
üë§ Mening profilim

üìù Ism: {first_name} {last_name}
üì± Telefon: {phone}
üåê Til: {language}
‚≠ê Status: {status}
üìÖ Ro'yxatdan o'tgan: {created_at}

üéæ Statistika:
‚Ä¢ Jami bronlar: {total_bookings}
‚Ä¢ Faol bronlar: {active_bookings}
‚Ä¢ To'langan summa: {total_paid:,.0f} so'm
        """,
        "edit_profile": "‚úèÔ∏è Profilni tahrirlash",
        "change_language": "üåê Tilni o'zgartirish",
        "toggle_notifications": "üîî Bildirishnomalar",
        
        # Xatolar
        "error_occurred": "‚ùå Xatolik yuz berdi. Iltimos, qaytadan urinib ko'ring.",
        "invalid_date": "‚ùå Noto'g'ri sana. Iltimos, to'g'ri sana tanlang.",
        "invalid_time": "‚ùå Noto'g'ri vaqt. Iltimos, to'g'ri vaqt tanlang.",
        "court_not_available": "‚ùå Tanlangan kort mavjud emas.",
        "booking_expired": "‚è∞ Bron vaqti tugadi. Iltimos, qaytadan bron qiling.",
        "insufficient_balance": "üí≥ Hisobingizda yetarli mablag' yo'q.",
        
        # Tugmalar
        "back": "‚¨ÖÔ∏è Orqaga",
        "next": "‚û°Ô∏è Keyingi",
        "previous": "‚¨ÖÔ∏è Oldingi",
        "today": "üìÖ Bugun",
        "refresh": "üîÑ Yangilash",
        "close": "‚ùå Yopish",
        
        # Vaqt formatlari
        "time_format": "%H:%M",
        "date_format": "%d.%m.%Y",
        "datetime_format": "%d.%m.%Y %H:%M",
        
        # Holatlar
        "status_pending": "‚è≥ Kutilmoqda",
        "status_confirmed": "‚úÖ Tasdiqlangan",
        "status_paid": "üí≥ To'langan",
        "status_cancelled": "‚ùå Bekor qilingan",
        "status_completed": "‚úÖ Bajarilgan",
        "status_no_show": "üö´ Kelmagan",
        
        # Oylar
        "months": [
            "Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun",
            "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"
        ],
        
        # Hafta kunlari
        "weekdays": ["Du", "Se", "Ch", "Pa", "Ju", "Sh", "Ya"],
        
        # Admin
        "admin_panel": "üë®‚Äçüíº Admin panel",
        "admin_bookings": "üìä Bronlar",
        "admin_users": "üë• Foydalanuvchilar",
        "admin_courts": "üèü Kortlar",
        "admin_reports": "üìà Hisobotlar",
        "admin_settings": "‚öôÔ∏è Sozlamalar",
        
        # Qoidalar va yordam
        "rules_text": """
üìã Tennis kort qoidalari:

üïê Ish vaqti: 06:00 - 23:00
‚è∞ Minimal bron vaqti: 1 soat
üìÖ Maksimal oldindan bron: 30 kun
üí∞ To'lov: Bron vaqtida to'liq to'lov
‚ùå Bekor qilish: 6 soat oldin (50% qaytarish)
üéæ Raketkalar va to'plar alohida ijaraga beriladi
üö´ Ichimlik va ovqat olib kirish taqiqlangan
        """,
        
        "help_text": """
‚ùì Yordam

üéæ Tennis kort bron qilish:
1. "üóì Bron qilish" tugmasini bosing
2. Sana va vaqtni tanlang
3. Kortni tanlang
4. To'lovni amalga oshiring
5. QR-kodli biletingizni oling

üìû Qo'llab-quvvatlash: +998 90 123 45 67
üìß Email: support@tennisbot.uz
üïê Ish vaqti: 24/7
        """,
        
        # Bildirishnomalar
        "booking_reminder_24h": "‚è∞ Eslatma: Sizning bronigiz ertaga {time} da {court_name} kortida.",
        "booking_reminder_2h": "‚è∞ Eslatma: Sizning bronigiz 2 soatdan so'ng {court_name} kortida boshlanadi.",
        "booking_cancelled": "‚ùå Sizning {date} {time} dagi bronigiz bekor qilindi.",
        "payment_reminder": "üí≥ Eslatma: {amount:,.0f} so'm miqdoridagi to'lovingiz kutilmoqda.",
    },
    
    "ru": {
        # –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ–Ω—é
        "main_menu": "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
        "book_court": "üóì –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å",
        "my_bookings": "üé´ –ú–æ–∏ –∑–∞–∫–∞–∑—ã",
        "my_profile": "üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å",
        "rules": "‚ÑπÔ∏è –ü—Ä–∞–≤–∏–ª–∞",
        "help": "‚ùì –ü–æ–º–æ—â—å",
        "language": "üåê –Ø–∑—ã–∫",
        
        # Start –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        "welcome": "üéæ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–Ω–Ω–∏—Å–Ω–æ–≥–æ –∫–æ—Ä—Ç–∞!\n\n–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞ –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞:",
        "share_contact": "üì± –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–º–µ—Ä–æ–º",
        "enter_name": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:",
        "enter_surname": "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à—É —Ñ–∞–º–∏–ª–∏—é:",
        "registration_complete": "‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!\n\n–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–Ω–Ω–∏—Å–Ω—ã–µ –∫–æ—Ä—Ç—ã.",
        
        # –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        "select_month": "üìÖ –í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:",
        "select_date": "üìÖ –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É:",
        "select_court": "üèü –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä—Ç:",
        "select_time": "‚è∞ –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è:",
        "no_available_slots": "‚ùå –ù–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É –Ω–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏",
        "booking_details": """
üéæ –î–µ—Ç–∞–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:

üìÖ –î–∞—Ç–∞: {date}
‚è∞ –í—Ä–µ–º—è: {start_time} - {end_time}
üèü –ö–æ—Ä—Ç: {court_name}
‚è± –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: {duration} —á–∞—Å

üí∞ –î–µ—Ç–∞–ª–∏ —Ü–µ–Ω—ã:
‚Ä¢ –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞: {base_price:,.0f} —Å—É–º
‚Ä¢ –î–æ–ø–ª–∞—Ç–∞ –∑–∞ –ø–∏–∫–æ–≤–æ–µ –≤—Ä–µ–º—è: {peak_extra:,.0f} —Å—É–º
‚Ä¢ –î–æ–ø–ª–∞—Ç–∞ –∑–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ: {weekend_extra:,.0f} —Å—É–º
‚Ä¢ VIP —Å–∫–∏–¥–∫–∞: -{discount:,.0f} —Å—É–º
‚Ä¢ –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä: {service_fee:,.0f} —Å—É–º

üí≥ –ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ: {total_amount:,.0f} —Å—É–º
        """,
        "confirm_booking": "‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –±—Ä–æ–Ω—å",
        "cancel_booking": "‚ùå –û—Ç–º–µ–Ω–∏—Ç—å",
        
        # –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã...
        # (–î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å, –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤—Å–µ)
    }
}

def get_text(key: str, lang: str = "uz", **kwargs) -> str:
    """
    –¢–µ–∫—Å—Ç –æ–ª–∏—à —Ñ—É–Ω–∫—Å–∏—è—Å–∏
    
    Args:
        key: –¢–µ–∫—Å—Ç –∫–∞–ª–∏—Ç–∏
        lang: –¢–∏–ª –∫–æ–¥–∏ (uz, ru)
        **kwargs: –¢–µ–∫—Å—Ç–≥–∞ “õ—û—à–∏–ª–∞–¥–∏–≥–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–∞—Ä
    
    Returns:
        –§–æ—Ä–º–∞—Ç–ª–∞–Ω–≥–∞–Ω —Ç–µ–∫—Å—Ç
    """
    if lang not in TEXTS:
        lang = "uz"
    
    if key not in TEXTS[lang]:
        # –ê–≥–∞—Ä —Ç–µ–∫—Å—Ç —Ç–æ–ø–∏–ª–º–∞—Å–∞, —û–∑–±–µ–∫—á–∞ –≤–µ—Ä—Å–∏—è—Å–∏–Ω–∏ “õ–∞–π—Ç–∞—Ä–∏—à
        if key in TEXTS["uz"]:
            text = TEXTS["uz"][key]
        else:
            return f"[{key}]"  # –¢–µ–∫—Å—Ç —Ç–æ–ø–∏–ª–º–∞–≥–∞–Ω –±–µ–ª–≥–∏—Å–∏
    else:
        text = TEXTS[lang][key]
    
    try:
        return text.format(**kwargs)
    except (KeyError, ValueError):
        return text

def get_keyboard_text(key: str, lang: str = "uz") -> str:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Ç—É–≥–º–∞–ª–∞—Ä–∏ —É—á—É–Ω —Ç–µ–∫—Å—Ç –æ–ª–∏—à"""
    return get_text(key, lang)

# –¢–∏–ª–ª–∞—Ä–Ω–∏ –æ–ª–∏—à —Ñ—É–Ω–∫—Å–∏—è—Å–∏
def get_available_languages() -> dict:
    """–ú–∞–≤–∂—É–¥ —Ç–∏–ª–ª–∞—Ä–Ω–∏ “õ–∞–π—Ç–∞—Ä–∏—à"""
    return {
        "uz": "üá∫üáø O'zbek",
        "ru": "üá∑üá∫ –†—É—Å—Å–∫–∏–π"
    }
